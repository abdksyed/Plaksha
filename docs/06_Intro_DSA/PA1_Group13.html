<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Gupta, Shivanshu; Abdul Khader, Syed">
<meta name="description" content="Implementing Stacks ADT using Array(Constant Size Increase and Double), Linked List">

<title>Plaksha - Programming Assignment 1 - Playing with Stack</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Plaksha</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Programming Assignment 1 - Playing with Stack</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../01_Mathematics_I/index.html" class="sidebar-item-text sidebar-link">Mathematics I</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../02_Python_Programming/index.html" class="sidebar-item-text sidebar-link">Introduction to Prgramming</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../03_Intro_AI/index.html" class="sidebar-item-text sidebar-link">Introduction to Artificial Intelligence</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../04_DataVisualization/index.html" class="sidebar-item-text sidebar-link">Data Visualization</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05_Mathematics_II/index.html" class="sidebar-item-text sidebar-link">Mathematics II</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#theoretical-analysis" id="toc-theoretical-analysis" class="nav-link" data-scroll-target="#theoretical-analysis">Theoretical Analysis</a>
  <ul class="collapse">
  <li><a href="#array-based" id="toc-array-based" class="nav-link" data-scroll-target="#array-based">Array Based</a>
  <ul class="collapse">
  <li><a href="#constant-increase" id="toc-constant-increase" class="nav-link" data-scroll-target="#constant-increase">Constant Increase</a></li>
  <li><a href="#doubling-size" id="toc-doubling-size" class="nav-link" data-scroll-target="#doubling-size">Doubling Size</a></li>
  </ul></li>
  <li><a href="#linked-list-based" id="toc-linked-list-based" class="nav-link" data-scroll-target="#linked-list-based">Linked List Based</a>
  <ul class="collapse">
  <li><a href="#time-complexity-for-push-operation-2" id="toc-time-complexity-for-push-operation-2" class="nav-link" data-scroll-target="#time-complexity-for-push-operation-2">Time Complexity for Push Operation</a></li>
  </ul></li>
  <li><a href="#comparision" id="toc-comparision" class="nav-link" data-scroll-target="#comparision">Comparision</a></li>
  </ul></li>
  <li><a href="#experimental-setup" id="toc-experimental-setup" class="nav-link" data-scroll-target="#experimental-setup">Experimental Setup</a>
  <ul class="collapse">
  <li><a href="#machine-specification" id="toc-machine-specification" class="nav-link" data-scroll-target="#machine-specification">Machine Specification:</a>
  <ul class="collapse">
  <li><a href="#cpu-apple-m1-chip" id="toc-cpu-apple-m1-chip" class="nav-link" data-scroll-target="#cpu-apple-m1-chip">CPU: Apple M1 chip</a></li>
  <li><a href="#memory" id="toc-memory" class="nav-link" data-scroll-target="#memory">Memory</a></li>
  </ul></li>
  <li><a href="#testing-different-implementations" id="toc-testing-different-implementations" class="nav-link" data-scroll-target="#testing-different-implementations">Testing Different Implementations</a></li>
  </ul></li>
  <li><a href="#experimental-results" id="toc-experimental-results" class="nav-link" data-scroll-target="#experimental-results">Experimental Results</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Programming Assignment 1 - Playing with Stack</h1>
</div>

<div>
  <div class="description">
    Implementing Stacks ADT using Array(Constant Size Increase and Double), Linked List
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Gupta, Shivanshu; Abdul Khader, Syed </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>The experiment’s objective is to build the <code>Stack ADT</code> on top of Array and Linked List.</p>
<p>The Array implementation was performed using two different methods:</p>
<ul>
<li>increasing the array size with a <code>constant size</code> whenever the stack is filled and</li>
<li>expanding the array size by <code>doubling</code> it</li>
</ul>
<p>The Linked List implementation was performed with the help of a <code>Node</code> class, which gives a node object for every element added to the stack and linked with other nodes via a pointer <code>next</code></p>
<p>After implementing these Data Structures, we experiment to measure the time taken to push upto 10 Million elements in each implementation and compare them with each other and with the built-in Stack in the <code>collections</code> library named <code>deque</code></p>
</section>
<section id="theoretical-analysis" class="level1">
<h1>Theoretical Analysis</h1>
<section id="array-based" class="level2">
<h2 class="anchored" data-anchor-id="array-based">Array Based</h2>
<p>We will be implementing array-based Stack, and the Array is considered dynamic here and can be increased in size in two ways.</p>
<section id="constant-increase" class="level3">
<h3 class="anchored" data-anchor-id="constant-increase">Constant Increase</h3>
<p>The Array-based implementation, which involves increasing the size of the array by the same constant size when the stack is full, is executed by copying the entire array to a new array of the size <code>old_array + constant_factor</code></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/ConstantArray.jpeg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Array with Constant Factor Increase</figcaption><p></p>
</figure>
</div>
<section id="time-complexity-for-push-operation" class="level4">
<h4 class="anchored" data-anchor-id="time-complexity-for-push-operation">Time Complexity for Push Operation</h4>
<p>For <code>n</code> elements to be pushed in the stack, let us assume we have an initial array of constant size of <code>c</code>, and whenever the stack is filled, we increase the array by the same size <code>c</code></p>
<p><span class="math inline">\(T(n) = n + c + 2c + 3c + ... + kc\)</span></p>
<p>Here <code>n</code> is the number of elements being pushed, so for each element accessing and placing the element in the array takes <span class="math inline">\(O(1)\)</span> time. Hence for <code>n</code> elements. it is <span class="math inline">\(O(n)\)</span> time.</p>
<p>After every <code>c</code> element is filled, a new array is created of <code>old_size + c</code>, and all the elements from the old array are copied to this new array, so for every new <code>c</code> addition, we have to copy <code>c</code>, <code>2c</code>, <code>3c</code> and so on elements until the final <code>c</code> set elements where we copy <code>kc</code> elements.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/ConstantArray_TimeComplex.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Time Complexity for <code>n</code> pushes in Constant Increase Array</figcaption><p></p>
</figure>
</div>
<p><span class="math inline">\(T(n) = n + c + 2c + 3c + ... + kc\)</span></p>
<p><span class="math inline">\(T(n) = n + c(1+2+3+...+k)\)</span></p>
<p><span class="math inline">\(T(n) = n + (c*k*(k+1))/2\)</span></p>
<p><em>c is constant and can be ignored</em></p>
<p><span class="math inline">\(T(n) = n + k^2\)</span></p>
<p><span class="math inline">\(k = n/c\)</span></p>
<p><em>c is constant and can be ignored</em></p>
<p><span class="math inline">\(T(n) = n + n^2\)</span></p>
<p><span class="math inline">\(T(n) = O(n^2)\)</span></p>
<p>The Amortized time for each push operation is <span class="math inline">\(T(n)/n = O(n^2)/n = O(n)\)</span></p>
</section>
</section>
<section id="doubling-size" class="level3">
<h3 class="anchored" data-anchor-id="doubling-size">Doubling Size</h3>
<p>We start with an array of size <code>c</code>(assume c=1) and push elements to the array. When the stack is filled, we create a new array of size <code>old_size * 2</code>. So when for <span class="math inline">\(i^{th}\)</span> increase, the size of the array will be <span class="math inline">\(2^i\)</span></p>
<section id="time-complexity-for-push-operation-1" class="level4">
<h4 class="anchored" data-anchor-id="time-complexity-for-push-operation-1">Time Complexity for Push Operation</h4>
<p>Hence for <code>n</code> elements, <span class="math inline">\(T(n) = n + (1 + 2 + 2^2 + 2^3 + ... + 2^k)\)</span></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/DoubleArray.png" class="img-fluid figure-img" style="width:80.0%"></p>
<p></p><figcaption class="figure-caption">Array with Doubling Size</figcaption><p></p>
</figure>
</div>
<p>Similar to previous one, the <code>n</code> here is adding n elements to the array, and the second term is for copying from old array to new array.</p>
<p><span class="math inline">\(T(n) = n + (1 + 2 + 2^2 + 2^3 + ... + 2^k)\)</span></p>
<p><span class="math inline">\(T(n) = n + (2^{2k+1} +1)\)</span></p>
<p><span class="math inline">\(k=\log_2 n\)</span></p>
<p><span class="math inline">\(T(n) = 3n - 1\)</span></p>
<p><span class="math inline">\(T(n) = O(n)\)</span></p>
<p>The Amortized time for each push operation is <span class="math inline">\(T(n)/n = O(n)/n = O(1)\)</span></p>
</section>
</section>
</section>
<section id="linked-list-based" class="level2">
<h2 class="anchored" data-anchor-id="linked-list-based">Linked List Based</h2>
<p>The Linked List approach is for every push of the element, we create a node object add the element to <code>data</code> variable of the object and the <code>next</code> variable is the pointer to the next node.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/LinkedList.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Linked List</figcaption><p></p>
</figure>
</div>
<section id="time-complexity-for-push-operation-2" class="level3">
<h3 class="anchored" data-anchor-id="time-complexity-for-push-operation-2">Time Complexity for Push Operation</h3>
<p>Here, for every push, we create a new node object, and the time to create an object is constant, for <code>n</code> elements the time taken to push these elements is creating <code>n</code> nodes, which takes <span class="math inline">\(O(n)\)</span> time.</p>
<p><span class="math inline">\(T(n) = n * c\)</span></p>
<p><em>c is constant and can be ignored</em></p>
<p><span class="math inline">\(T(n) = O(n)\)</span></p>
<p>Time for each push is <span class="math inline">\(T(n) = O(n)/n = O(1)\)</span></p>
</section>
</section>
<section id="comparision" class="level2">
<h2 class="anchored" data-anchor-id="comparision">Comparision</h2>
<p>Incremental Array is having the least optimum time complexity of <span class="math inline">\(O(n)\)</span> for each push, whereas the other two implementations have <span class="math inline">\(O(1)\)</span></p>
<p>In Doubling Array, the worst case time complexity to add one element, when the array size has to be increased is <span class="math inline">\(O(n)\)</span>, compared to the best/worst/average time complexity of Linked List is <span class="math inline">\(O(1)\)</span>.</p>
<p>Hence, Linked List would be a better Data Structure to implement the Stack ADT.</p>
</section>
</section>
<section id="experimental-setup" class="level1">
<h1>Experimental Setup</h1>
<section id="machine-specification" class="level2">
<h2 class="anchored" data-anchor-id="machine-specification">Machine Specification:</h2>
<section id="cpu-apple-m1-chip" class="level3">
<h3 class="anchored" data-anchor-id="cpu-apple-m1-chip">CPU: Apple M1 chip</h3>
<ul>
<li>8-core CPU with 4 performance cores and 4 efficiency cores.</li>
<li>5nm ARM-Based (v8.5+A) Processor</li>
<li>3.2 GHz CPU Clock Speed for Performance Cores</li>
<li>192(instruction) + 128(data) KB L1 Cache</li>
<li>12MB L2 Cache</li>
</ul>
</section>
<section id="memory" class="level3">
<h3 class="anchored" data-anchor-id="memory">Memory</h3>
<ul>
<li>16GB of LPDDR4X-4266 MHz SDRAM</li>
</ul>
</section>
</section>
<section id="testing-different-implementations" class="level2">
<h2 class="anchored" data-anchor-id="testing-different-implementations">Testing Different Implementations</h2>
<p>To test both the array-based and linked list implementations, we calculate the time taken to push elements in the stack.</p>
<p>The setup is such that the time is calculated cumulatively for every 100 pushes for overall <code>n</code> iterations.</p>
<p>The <code>n</code> here is 100,000; 500,000; 1,000,000 and 10,000,000 pushes with time calculated cumulatively after every 100 pushes. For each of these experiments, it was repeated 10 times and the average time was for each 100 was calculated at the end.</p>
</section>
</section>
<section id="experimental-results" class="level1">
<h1>Experimental Results</h1>
<p>The Experiment followed the theoretical analysis, where asymptotically when the value of number of pushes goes higher and higher, the Array with constant increase behave quadratic <span class="math inline">\(O(n^2)\)</span>, whereas all the other three, i.e, Array with doubling the size, Linked List and In-built Deque have linear complexity <span class="math inline">\(O(n)\)</span>.</p>
<p>In the beginning, with small number of pushes like 100,000 the above mentioned behaviour is not evident, but as we keep on increasing the number of pushes, all the four implementations start following the pattern.</p>
<p>There is one discrepancy, that the Linked List Stack is taking more time than any Array Doubling Stack, whereas for Linked List, the best/worst/average case for each push is <span class="math inline">\(O(n)\)</span> where as the worst case in Doubling Array Stack is <span class="math inline">\(O(n)\)</span>. So in theory Doubling Array should take more time.</p>
<p>But when performing profiling on the linked list class pushes, we see that we create a new node object on every call of the function and there is an overhead in the object creation.</p>
<p>This is also the reason we see sudden spikes in the green line(linked list) of later graphs. This is empirically shown in the Figure 5 where time calculation of 1000 Node creation, shows sudden spikes.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/NodeCreation.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">Node Creation Time (1000 Nodes)</figcaption><p></p>
</figure>
</div>
<p>The following graphs show the time complexities of 4 implementations, in various sizes of <code>n</code>. It is clear as to how when <code>n</code> increases, the time complexity becomes clearer and clearer</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/compare_1000_100.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">Compare Four Implementations - 100,000 Pushes</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/compare_5000_100.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">Compare Four Implementations - 500,000 Pushes</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/compare_10000_100.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">Compare Four Implementations - 1,000,000 Pushes</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./images/compare_100000_100.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">Compare Four Implementations - 10,000,000 Pushes</figcaption><p></p>
</figure>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>